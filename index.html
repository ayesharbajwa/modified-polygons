<!doctype html>
<html>
<head>

	<!-- Place this data between the <head> tags of your website -->
	<title>In progress</title>
	<meta name="description" content="A playable post on how harmless choices can make a harmful world." />
	<link rel="icon" type="image/png" href="favicon.png">

	<!-- Schema.org markup for Google+ -->
	<meta itemprop="name" content="Parable of the Polygons">
	<meta itemprop="description" content="A playable post on how harmless choices can make a harmful world.">
	<meta itemprop="image" content="http://ncase.me/polygons/social/thumbnail.png">

	<!-- Twitter Card data -->
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:site" content="@ncasenmare">
	<meta name="twitter:title" content="Parable of the Polygons">
	<meta name="twitter:description" content="A playable post on how harmless choices can make a harmful world.">
	<meta name="twitter:creator" content="@vihartvihart">
	<meta name="twitter:image" content="http://ncase.me/polygons/social/thumbnail.png">

	<!-- Open Graph data -->
	<meta property="og:title" content="Parable of the Polygons">
	<meta property="og:type" content="website">
	<meta property="og:url" content="http://ncase.me/polygons">
	<meta property="og:image" content="http://ncase.me/polygons/social/thumbnail.png">
	<meta property="og:description" content="A playable post on how harmless choices can make a harmful world.">
	<meta property="og:site_name" content="Parable of the Polygons">

	<!-- CSS -->
	<link href="css/index.css" rel="stylesheet" type="text/css">
	<link href="css/animate.css" rel="stylesheet" type="text/css">

	<!-- polymer, for facets -->
	<!-- load webcomponents bundle, which includes all the necessary polyfills -->
  <script src="https://unpkg.com/@webcomponents/webcomponentsjs@2.2.10/webcomponents-bundle.js"></script>

  <!-- load the element -->
  <link rel="import" href="facets/facets-jupyter.html">
</head>
<body>

	<!-- CARTOONS -->
	<div id="cartoon_container">
		<img id="cartoon" width="270" src=""/>
		<div id="cartoon_arrow"></div>
	</div>

	<!-- SPLASH -->
	<div id="intro_container">
		<div id="intro">
			<iframe src="play/intro/intro.html" id="intro_background" scrolling="no"></iframe>
		</div>
	</div>

	<!-- CHAPTER -->
	<div class="chapter_wide">

		<p>
			Welcome to the land of Polynomia!
		</p>
		<img src="play/img/land.png"/>
		<p>
			Polynomia is home to a variety of shapes. Meet some random shapes here:
		</p>
		<img class="animated fast bounce infinite delay-1s" src="play/img/green_square_yay.png"/>
		<img class="animated fast bounce infinite delay-2s" src="play/img/liblue_triangle_yay_blink.png"/>
		<img class="animated fast bounce infinite delay-3s" src="play/img/yay_triangle.png"/>
		<img class="animated fast bounce infinite delay-4s" src="play/img/pink_square_meh.png"/>
		<img class="animated fast bounce infinite delay-5s" src="play/img/blue_triangle_sad.png"/>

		<iframe playable src="play/mini/mini_ending.html" width="600" height="80" scrolling="no" style="margin:0 auto;display:block" embedded></iframe>

		<!--
		<form name="imageForm1">
			<table>
			<tr>
				<td>
				<input onclick="displayRandomHappy();" type=button value="Display Random Happy Shape">
				</td>
			</tr>
			<tr>
				<td>
				<img src="play/img/liblue_triangle_yay.png" name="canvas" />
				</td>
			</tr>
			</table>
		</form>
		-->
	</div>

	<!-- CHAPTER -->
	<div class="chapter_narrow">

		<p>
			The shapes go to school, and during the summers they like to go to camp.
			<br>
			<br>
			There are three popular summer camps in Polynomia: music camp, outdoor camp, and math camp.
		</p>
		<img src="play/img/sixteenth_notes.png"/>
		<img src="play/img/campfire.png"/>
		<img src="play/img/math.png"/>
		<p>
			In the past, only shapes from City1 went to camp because City1 sponsored it.
			<br><br>
			This year, camps will be open to all shapes in Polynomia for the first time! YAY
			TODO: yay animation?
		</p>

	</div>

<!-- CHAPTER -->
	<div class="chapter_narrow">
		<p>
			The summer camp directors are expecting to receive hundreds of applications.
			<br><br>
			To make this process more efficient and fair,
			the directors have decided to use an algorithm
			to help make decisions about who goes to each camp.
			<br><br>
		</p>
		<img src="play/img/application.png"/>
		<img src="play/img/director.png"/>
		<br>

		<div class="DiscussAndWrite">
			<div>What might work better with using an algorithm?</div>
			<div>What problems might come up?</div>
		</div>

		<div class="instruction">
			<br><br>
			How do we train this algorithm to make decisions?
			<br><br>
		</div>
	</div>

	<!-- CHAPTER -->
	<div class="chapter_wide">
		<br><p>
			There's a record of who has attended which camps in the past. We have a historical dataset.
		</p>
		<div class="HistoricalApplications">
			<div class="HistoricalApplications-preview"></div>
		</div>
		<p>
			These are the features the algorithm considers.
			<br><br>
			The algorithm uses the historical data to train a model, tweaking it little by little.
			<br>
			Once the model fits the data pretty well, the algorithm stops.
		</p>
	</div>

	<!-- CHAPTER -->
	<div style="width:400px;">
	    <canvas id="myChart" width="400" height="400"></canvas>
	</div>

	<div class="chapter_narrow">
		<p>
		Great! We can use the historical dataset to train the algorithm!
		</p>
	</div>

	<div class="chapter_wide">
		<div class="Animation TrainingAnimation">
			<div class="Animation-instructions-container">
				<div class="Animation-instructions">
					<img class="Train-button" src="play/img/play_icon.png"/ class="center">
					<div class="Animation-instructions-text">Train from 2017 data</div>
				</div>
			</div>
		</div>
	</div>

	<div class="chapter_narrow">
		<div class="DiscussAndWrite">
			<div>In your own words, how does the algorithm "learn" what to do?</div>
		</div>
	</div>

	<!-- CHAPTER -->
	<div class="chapter_narrow">
		<p>
		Okay!  Here are some triangles who are excited about the summer camp and sent in their applications.
		</p>
	</div>
	<div class="chapter_wide">
		<div class="MeetShapesDataset">
			<div class="MeetShapesDataset-dataset-preview"></div>
			<button class="MeetShapesDataset-create-dataset">Meet some more shapes excited for summer!</button>
		</div>
	</div>

	<div class="chapter_wide">
		<p>
		Awesome! Now we can deploy the model that the algorithm trained!
		TODO: make different icon for play - deploy
		</p>
		<img src="play/img/play_icon.png"/ class="DeployFirstCity-button center">
		<p>
		Notice the model sorting the shapes into what summer camp it thinks they should attend.
		</p>
	</div>
	<div class="chapter_wide">
		<div class="Animation DeployAnimation"></div>
	</div>

	<!-- CHAPTER -->
	<div class="chapter_wide">
		If algorithms and models always knew better
		than humans, we'd never have to think critically
		about the results.
		<br><br>
		Let's use our own reasoning to discuss the outcomes of the model's decisions.
	</div>

	<div class="instruction">
	<br><br>
	How does the model do?
	</div>

	<img src="play/img/school_bus_shapes.png" class="Vehicle" onclick="busZoom()"/>
	<!-- CHAPTER -->
	<div class="chapter_wide Visualize">
		<p>
			The next day at school, some of the shapes aren't too happy with the decisions produced.
			<br>
			Why are some shapes sad?
			<br><br>
			Use the buttons below to visualize the results in a few different ways.
			<br><br>
		</p>
		<div class="Visualize-tool">
			<button class="Visualize-button Visualize-by-shape">By Shape</button>
			<button class="Visualize-button Visualize-by-color">By Color</button>
			<button class="Visualize-button Visualize-by-camp">By Camp</button>
			<button class="Visualize-button Visualize-by-feeling">By Emotion</button>
			<div class="Evaluating">
				<canvas class="Evaluating-canvas" width="1024" height="350"></canvas>
			</div>
		</div>

		<div class="Visualize-facets chapter_narrow">
			<div>If you still have more questions, you can explore further with <button class="Visualize-facets-button">Facets Dive</button>, a tool made by people on the <a href="https://ai.google/research/teams/brain/pair" target="_blank" rel="noopener noreferrer">People + AI Research team (PAIR)</a>.</button>
		</div>
	</div>

	<!-- CHAPTER -->
	<div class="chapter_narrow">
		<div class="DiscussAndWrite">
			<div>Is there any pattern to the shapes the algorithm didn't work well for?</div>
			<div>Why might this be? Does this seem fair?</div>
		</div>
	</div>

	<div class="instruction">
		Let's see what this trained model decides in a different city.
	</div>

	<!-- CHAPTER -->
	<div class="chapter_narrow">
		<p>
		Pick another city.
		TODO: visualize deployment and results visualization again.
		</p>
	</div>

	<!-- CHAPTER -->
	<div class="chapter_narrow">
		<p>
		How do these results compare to the results you saw earlier?
		</p>
	</div>


	<div class="instruction">
		What does this mean for algorithms and models in the real world?
	</div>

	<!-- CHAPTER -->
	<div class="chapter_wide">
		<img src="play/img/camping.png"/>
		<img src="play/img/canoe.png"/>
		<p>
			...
		</p>
	</div>

	<!-- SPLASH -->
	<div id="outro_container">
		<div id="outro">
			<iframe src="play/outro/outro.html" id="outro_background" scrolling="no"></iframe>
		</div>
	</div>

</body>

<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.0.0/dist/tf.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.bundle.min.js"></script>
<script src="js/lodash.js"></script>
<script src="js/Mouse.js"></script>
<script src="js/intro.js"></script>
<script src="js/display_random.js"></script>
<script src="js/datasets.js"></script>
<script src="js/linclass2.js"></script>
<script src="js/training_animation.js"></script>
<script src="js/deploy_animation.js"></script>
<script src="js/velocity.min.js"></script>
<script src="js/wiggle.js"></script>
<script src="js/visualize.js"></script>
<script src="js/facets.js"></script>
<script>
	// global state
	window.game = {
		historicalDataset: DATASETS.exampleDatasets.historicalOne,
		firstCityDataset: DATASETS.exampleDatasets.unassignedCityOne,
		training: {
			progress: [],
			trainedModel: null,
			finalAccuracy: null
		}
	};
</script>
<script>
 	DATASETS.init(game, {
 		historicalEl: document.querySelector('.HistoricalApplications'),
 		meetShapesEl: document.querySelector('.MeetShapesDataset')
 	});
 	TRAINING.init(game, {
		trainButtonEl: document.querySelector('.Train-button'),
		predictFirstCityButtonEl: document.querySelector('.DeployFirstCity-button')
	});
 	VISUALIZE.init(game, document.querySelector('.Visualize'));
	FACETS.init(game, {
		buttonEl: document.querySelector('.Visualize-facets-button'),
		containerEl: document.querySelector('.Visualize-facets')
	});

	function busZoom() {
		var el = document.querySelector('.Vehicle')
		Velocity(el, { left: 800 }, 3000, "swing"); //move right
		Velocity(el, { opacity: 0 }, { visibility: "hidden" }); //alternatively, display: "none" to disappear el
	}
</script>
</div>
</html>